const express = require('express');
const router = express.Router();
const Test = require('../models/test');


//GET ALL
router.get('/get', function (req, res, next) {
    Test.find({}).then(function (test) {
        res.status(200).send(test);
    }).catch(next);

});

//GET ONE
router.get('/get/:id', function (req, res, next) {
    Test.find({ _id: req.params.id }).then(function (test) {
        res.status(200).send(test);
    }).catch(next);

});

//CREATE
router.post('/create', function (req, res, next) {
    Test.create(req.body).then(function (test) {
        res.status(201).send(test)
    }).catch(next);
});

//UPDATE
router.put('/update/:id', function (req, res, next) {
    Test.findByIdAndUpdate({ _id: req.params.id }, req.body).then(function () {
        Test.findOne({ _id: req.params.id }).then(function (test) {
            res.status(202).send(test);
        });
    }).catch(next);
});


//DELETE
router.delete('/delete/:id', function (req, res, next) {
    Test.findByIdAndDelete({ _id: req.params.id }).then(function (test) {
        res.status(200).send("Deleted Entry");
    }).catch(next);
});

module.exports = router;